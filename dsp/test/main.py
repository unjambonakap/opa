#!/usr/bin/env python

from chdrft.cmds import CmdsList
from chdrft.main import app
from chdrft.utils.cmdify import ActionHandler
from chdrft.utils.misc import Attributize
import chdrft.utils.misc as cmisc
import glog
import chdrft.utils.Z as Z

global flags, cache
flags = None
cache = None


def args(parser):
  clist = CmdsList().add(test)
  ActionHandler.Prepare(parser, clist.lst, global_action=1)


def test(ctx):
  print('on test')


def main():
  ctx = Attributize()
  ActionHandler.Run(ctx)
  x = Z.swig.opa_dsp_swig
  a = x.Satellites.GetSingleton()
  b = a.get(26)
  lst = []
  for i in range(x.PRN_PERIOD):
    lst.append(b.get_l1(i))
  have = ''.join(map(str, lst))

  target = '111111100000101111010001111100001000101011010101111010110100100101001010110000111101010111111001100011100010000111011001110101100100011000110110100110011110001110101100101011101111101010001001100000000111111001011100000110001001110101100001100000011001100010000111100110011110001111000101110111011001110111110001000100111010101001110101111000111010100110001011001001101001001001110111111101101001100101011101010010111111010001011010010111000110110111011100100110000000011100011100101100001101111001101100001100110011111100011101110001011110001000011000110100011100101100011111111001101000010100101011101001101100001000001001101010010110010000000101011101001001110101101110010000011010001011001110101011010100100010110001000010101100111000011000101110001110111101010111101011001000000011100110100100101011010110101001011010000010000010001011100010101011001001000110010011000100111100001111010100011000100001111111101001110101010001001111011111001101000001101000101111000011110001000111010101111110000000000001111011110111010'
  assert have == target
  print('ok')



app()
